# PCtyx 使用指南 - Teages

[原文链接](https://blog.teages.xyz/pages/newPCtyx.html)

!> 作者: Teages

!> **原文同步于 2020/8/7 ,请注意时效性**

新版本的PCtyx终于来了！

来做篇针对新版本的教程吧，之后会整合到制谱教程里。

PCtyx下载 : [Github仓库](https://github.com/XionUzuki/PCtyx/releases)

PCtyx 官方文档翻译: [文档翻译](https://blog.teages.xyz/_source_Teages-PCtyx.md/PCtyx_Editor_CN.pdf)

最后更新: 2020.4.5

<!-- more -->

> 注意: 这篇文章只是告诉你如何使用**高效地**使用工具, **并不是**告诉你如何正确的使用工具

> 可能你需要阅读[Cytoid制谱指南](https://blog.teages.xyz/pages/cytoid.html)来避免产出粪谱.

> **如果你就是想生产粪谱,请不要阅读这篇教程,这篇教程并不适合你**

# 界面内容

## 开始的地方 : 文件界面

先来介绍一下一开始的界面 : 文件界面

![文件界面](/_source_Teages-PCtyx.md/file.png)

每个按钮的功能都很清楚吧. 

在这个页面,我们最常做的只有下面几件事情

1. 加载音频
2. 加载之前做一半的铺面(.csv文件),或者新建一个铺面
3. 加载一个背景图片或是背景视频(通常是用来录制预览视频的)
4. 保存铺面
5. 导出铺面为C2格式(也就是导出成Cytoid能读取的谱面)

**需要注意的是,"New Chart"按钮和"Load"按钮功能类似,但是前者只能导入音频**

### 加载音频

显而易见,直接点击"Load",选择你已经处理好的音频就行了.

> 注意:PCtyx(ver.200)支持的音频有 **.ogg** 等,暂时**不支持 MP3**

### 加载之前做好一半的铺面

"Load"按钮可以加载很多东西,想导入音频一样导入你的谱面(.csv文件)就好了

> 注意:请先加载音频再加载谱面

### 加载背景图片或视频

同样使用"Load"导入

> 支持的图片文件 : jpg,png等
>
> 支持的视频文件 : mp4等

### 保存铺面

点击"Save Chart",输入保存文件的名字~~,加上".csv"后缀(现在不需要了)~~,点击保存即可

> 你或许需要一些[保存技巧](##第三步--保存与备份)

### 导出谱面为C2格式

点击"Save Chart",输入保存文件的名字,**加上".txt"后缀**,点击保存即可

> 保存的C2格式谱面需要打包成.cytoidlevel才能被Cytoid正常读取

## 开始制谱 : 制谱界面

点击下图箭头所指的那个按钮,你就能进入制谱界面了!

![进入制谱界面](/_source_Teages-PCtyx.md/to-charting.png)

下图是制谱界面的详细说明

![制谱界面](/_source_Teages-PCtyx.md/charting.png)

### 解释

#### 1. 扫描线控制器

- 最上面:分两种情况:①扫描线是原先预设在谱面开头的:设置偏移时间,以秒为单位;②扫描线是自己添加的:设置这个扫描线的 y 轴.
- 控制判定线出现位置,可以做到判定线从同一方向扫描的特效(例如Cytus2中ChromeVOX,Glitch难度中的判定线特效).
- (**重要**)BPM控制,这个数值决定了扫描线速度,改变BPM可以做到变速和停线特效.

#### 2. 网格设置和编辑模式设置

##### 网格设置

点击第一个按键,你可以看到底栏变成了下图这样

![网格设置](/_source_Teages-PCtyx.md/charting-2.png)

从左到右依次是:

- 网格列数,决定网格,一般取8或16最佳,特殊情况请检查歌曲的拍子结构
- 网格行数
- 偏移,BPM,还有一个不明觉厉的参数,这些对平常做谱都没有意义,请不要修改他们

##### 编辑模式设置

第二个按钮是经典编辑模式,第三个按钮是手动编辑模式,它们只有一个不同

###### 经典编辑模式

添加note要从两侧把note拖入网格内

###### 手动编辑模式

添加note要使用右键点击空白处

#### 3. Note移动和扫描线设置

- 左右移动Note
- 上下移动Note

>  (这里这个版本标反了wwwwwww)

- 扫描线设置器,选中这个工具可以放置一个扫描线修改器.
> ~~请把这个修改器放在一页最开始的地方,否则Cytoid 1.5会识别异常.(Cytoid 2.0已经修复,请等待更新)~~

> 后面会讲到这玩意怎么用

> 提示: 任何的note和扫描线设置都可以使用键盘上的Backspace删除

#### 4. Note修改器

准确来说,它们的功能只是把你点击note变成你想要的样子,放置note实际上是[8. Note备选栏](#8. Note备选栏)的功能

从左到右依次是:

1. 普通的Click,右下是点锁的子锁链,但是Cytoid不认点锁(给click一个序号能让他充当点锁的父锁链)
2. Hold,如果长度足够长会自动转换成Long Hold
3. 普通的锁链,右下角是子锁链,关于锁链的应用请见下文
4. ~~你没发现吗,这TM根本没有4,~~其实4就是子锁链的快捷键,只是没有标记出来
5. Flick,一个让玩家又爱又恨的note
6. 反note,点了反而会bad,但请不要使用它,Cytoid不认这个note(导出时会变成点锁)

选中你使用的Note修改器,点击一个note就能让它变成你选中放置器的样子

> 提示: 任何的note和扫描线设置都可以使用键盘上的Backspace删除

#### 5. 文件界面,预览和页面跳转

- 第一个按钮点了会回到上文的文件界面
- 第二个按钮点了可以开始预览谱面效果
- 第三个按钮点了会向前跳转**10**页
- 第四个按钮点了会向前跳**1**页

#### 6. 状态信息

从左到右依次是

- 扫描线方向(T从上到下,B从下到上)
- 当前页面的BPM
- 当前页面位置
- 当前页面开始处的时刻

#### 7. 页面跳转和bpm对齐设置

- 第一个按钮点了会向前跳转**10**页
- 第二个按钮点了会向前跳**1**页
- 第三个按钮用于调整一些更改BPM后的行为,一般不用理会

#### 8. Note备选栏

使用"AD"水平移动工具,将note移入网格内就能添加一个note

#### 9.  撤销变更,自动对齐和网格开关

- 左边按钮上面大大的**Ctrl + Z**让人一眼就知道它是干嘛的.要注意的是,点击它会导致**这一页**的更改**全部**撤销,如果你切了页面就没办法撤销了.
- 右上是自动对齐,开了以后移动note会自动对齐到网格上
- 右下是控制网格显示的.~~如果你觉得网格丑可以关掉他.(不是)~~

## 预览界面

![preview](/_source_Teages-PCtyx.md/preview.png)

- 左上角是停止和暂停,点停止按钮会回到开始预览的那一页,点暂停可以直接编辑这一页
- 中间上面是当前的note,下面是总note数
- 右边是分数

> 界面介绍就到此结束了

# 制谱流程

### 第一步 : 导入

一般做谱的时候我们需要导入的有音频文件,当然可能也要导入之前做到一半的谱面.

如果你需要录制预览,可以再导入图片或者视频

对于一些人来说,导入曲绘~~(老婆)~~能提高他们的工作效率

## 第二步 : 设置初始BPM

首先我们回顾下[扫描线控制器](#1-扫描线控制器)

> ![制谱界面](/_source_Teages-PCtyx.md/charting.png)
>
> 扫描线控制器
>
> - 最上面:分两种情况:**①扫描线是原先预设在谱面开头的:设置偏移时间,以秒为单位**;②扫描线是自己添加的:设置这个扫描线的 y 轴.
> - 控制判定线出现位置,可以做到判定线从同一方向扫描的特效(例如Cytus2中ChromeVOX,Glitch难度中的判定线特效).
> - (**重要**)**BPM控制**,这个数值决定了扫描线速度,改变BPM可以做到变速和停线特效.

明白了要使用什么工具,那我们现在开始动手吧.

1. 选中[扫描线控制器](#1-扫描线控制器)
2. 点击最下面的数字,输入你的制谱BPM
3. 回车

> 制谱BPM不一定等于歌曲BPM,例如制作高BPM歌曲时,你可以进行恰当的变速来避免线速过高/过低给玩家带来的不适感
> 
> 小知识: BPM的变化最好是
> 1. \* 2的n次方(加速)
> 2. ÷ 2的n次方(减速)

## 第三步 : 加一些note

### 移动note

用wasd像其他游戏中移动人物一样移动,当然配合鼠标和滚轮能有更好的移动效果

> 试一试 : wasd,鼠标,滚轮要怎么配合才能达到最佳移动效果呢

### 添加note

将note从左右的备选中挪到网格里就行了

> 为什么不试试右键就能放note的[手动编辑模式](#手动编辑模式)呢?

### 与音乐对齐

进入文件界面,勾上"1/2 Speed"选项.这样能让你更方便将铺面与音乐对齐

> Question : 仅仅靠目力~~(?)~~是难以对音的,怎么样才能更准确更方便的对音?

技巧 :

- 利用key音 : 仔细聆听key音,如果key音和节奏同步,那这个note与谱面是对齐的
- 减小note大小 : 回到文件页面,点击"Size"调整note大小.一般来说,越小的note越方便对音,~~(但是不推荐纯目力对音)~~

### 添加hold

练习 :

1. 用hold工具点击note,把一个普通note变成hold
2. 试着用鼠标滚轮增加或减少这个hold的长度
3. 当这个hold延伸到页面以外的时候,hold就变成了长hold

> 观察 : 当hold变成长hold,到下一页去看一下,你发现了什么?

### 添加锁链

锁链的规则可能有些复杂,但它很好理解,我们分两种情况

#### 1. 同时只有一条锁链

我们像下面这样摆放两条锁链

![两条不同时判定的锁链](/_source_Teages-PCtyx.md/drag-1.png)

可以发现这如同我们的预期

![预览](/_source_Teages-PCtyx.md/drag-2.png)

是不是很简单呢?

#### 2. 同时有多条锁链

有些时候,我们可能会想同时摆两条锁链.小明这样摆了一下,想让锁链像图中蓝线一样连接

![想象中](/_source_Teages-PCtyx.md/drag-3.png)

但实际上,生活给予了他重击,编辑器像下图这样连接了(悲)

![生活的重击](/_source_Teages-PCtyx.md/drag-4.png)

到底应该怎样连接呢?他思索了许久,用滚轮改变了两个note的序号

![drag-5](/_source_Teages-PCtyx.md/drag-5.png)

现在锁链按照他预想的连接了!

#### 3. 总结

锁链头会尝试连接下一个有着相同序号的子锁链,找到另一个有相同序号的锁链头就停止尝试.然后它就会把之前找到的子锁链全部按时间一个个串起来.

**警告 : 你不应该在同一水平面放两个序号相同的子锁链**~~,勿谓言之不预~~

> 试一试 : 跨屏锁链怎么做呢?
>
> 进阶 : 怎么用锁链画一个爱心呢?

## 第三步 : 保存与备份

常常有人谱面做到一半,因为各种原因,PCtyx异常退出了(悲).

这是件非常糟糕的事情,谱面很有可能会丢失,谁也不想这样的事情发生在自己头上.

这里我们介绍一种保存策略.

### 常做保存

我有一个习惯,当做完一小部分以后,会保存一次.

保存的名称大概这样:`1.csv  2.csv  3.csv  4.csv  ...`

这种保存方法有两个好处: 一是能够避免上面那种情况,因为程序意外关闭导致的谱面丢失.二是能够随时回退到上一个版本,不必担心实验一些新配置以后要繁琐地删除实验摆放的note.

~~注意 : 保存的时候请加上后缀`.csv`~~

### 备份

请把你的谱面文件备份到其他位置,以防不测.

## 第四步 : 导出

和保存类似,在保存的时候保存为后缀为`.txt`即可.例如`chart_hard.txt`



# 进阶操作

光靠上面的的内容是可以写谱了,但是我们希望追求更高的效率

因此你还要学习以下内容

## 多选

有些时候我们想把很多note移动一下,或者批量编辑他们

这时,多选的重要性就体现出来了

下面是文档(翻译)原文

> 按住 Ctrl 并点击 note 可以选中多个 note. (不在这一页的 Long notes 和 scanline note 不能被多选)

选中多个note以后,你可以

1. 使用水平移动工具移动这些note的X轴.
2. 使用竖直移动工具移动这些note的Y轴.
3. 将它们改成同一种note
4. 将它们全部删除
5. 镜像它们的位置

## 剪贴板

>  ~~作为一个音游玩家,不复读怎么行???~~

首先了解剪贴板.

在PCtyx,你拥有多达六个剪贴板

选中note以后,使用`Ctrl+C`, `Ctrl+1`, `Ctrl+2`, `Ctrl+3`, `Ctrl+4`, `Ctrl+5` 可以将选中的note存储到剪贴板

使用`Ctrl+V`, `Shift+1`, `Shift+2`, `Shift+3`, `Shift+4`, `Shift+5` 可以将剪贴板内的note放出来

## 变速

添加一个扫描线note,可以修改扫描线移动速度

### 如何变速

对于扫描线中的参数,官方文档有详细的介绍

> 摘自PCtyx文档(翻译)
>
> Time/Y(第一排数据): 分两种情况: ①扫描线是原先预设在谱面开头 的: 设置偏移时间, 以秒为单位; ②扫描线是自己添加的: 设置这个扫描 线的 y 轴. 注意: 对于第一个扫描线: note 不能放在第一页,并且不能放 在 0.33333333s 以前. 黄色线表示 note(除了扫描线)不能放在那上面. 
>
> Speed(第三排数据): 设置扫描线的速度. 最低 0.1BPM 最高 60,000,000BPM. 输入计算表达式可以自动计算. (例如: “120 / 2” 会将 120BPM 减半到 60BPM.) 
>
> Position/Scroll Mode(第二排数据): 设置扫描线的开始位置和滚动 方式. 只能修改放在这一页顶部/底部的扫描线的开始位置. 左键点击修改它的开始位置. 右键点击修改它的滚动模式. 
>
> * Rbd - 正常的 Cytus 模式; 扫描线自动反弹. 
>
> * Swp - 重复扫描线方向. 
>
> * Frz - 冻结扫描线; note 出现在扫描线上. 
>
> > PCtyx 独占: 将扫描线冻结在中间是 PCtyx 独有的, C2 格式只 能将扫描线冻结在顶部/底部; 在 C2 格式中, note 会显示在原 先的位置, 而不是像 PCtyx 一样在扫描线上, 冻结在中间的扫 描线会在下一页的顶部/底部执行. 
>
> * Fall - 冻结扫描线; notes 坠落到扫描线上(类似于下落式). 
>
> > PCtyx 独占: 这个模式在 C2 导出时被导出为 Swp . 
>
> * End - 提早结束谱面. 这之后的 note 会被跳过.

> 提示: 任何的note和扫描线设置都可以使用键盘上的Backspace删除,不想变速可以直接删掉

### 高级变速操作

#### 一般效果变速

最好是BPM翻倍或减慢一半,建议使用`2`或者`0.5`的整数次方进行BPM操作,建议把BPM控制在`50 - 350`

> ~~否则会被玩家踢~~

#### 闪线

为了达成像V.的Hold一样的炫酷效果,我们需要闪线

这是一个比较困难的操作, 我与PCtyx作者就这一操作的讨论[#10: Stop the Line ](https://github.com/XionUzuki/PCtyx/issues/10)

为了避免被滥用这里我们这里放出两个原理公式,实际上,每首歌都需要单独计算.

##### 方法1(不推荐)

> 1. 起始点放一个Scanline_Start, 速度为`BPM*15 / (16*16)`
> 2. 结束点放一个Scanline_End, 速度为`BPM`
> 3. 取起始点和结束点连线的`16分`点, 放一个Scanline_jump, 速度为`BPM*16`
> 4. enjoy!

##### 方法2

> 1. 起始点放一个Scanline_Start, 速度为`BPM/15`
> 2. 结束点放一个Scanline_End, 速度为`BPM`
> 3. 取起始点和结束点连线的`16分`点, 放一个Scanline_jump, 速度为`BPM*15`
> 4. enjoy!

> 注意: 在一页的中间变速在Cytoid2.0以下的版本无效, 目前预计Cytoid 2.0 会在2020.08 发布(?),如果你的铺面使用了这一效果(包括闪线),请留意Cytoid 2.0的发布时间

> 注意: 请不要滥用变速,好的变速可以给你的谱面增加活力, 糟糕的变速可能会让你的谱面变成粪谱.

## 更方便的编辑模式

尝试使用全新手动编辑模式

使用非常简单,切换模式,在需要添加note的位置右键即可

> 如果开启了网格对齐,那么note会自动贴到最近的网格上

# 新旧版本差异

## 从PCtyx v131.02a迁移

首先,本人非常不建议将旧的谱面迁移到v200版本.

当然,如果你非这样不可,你可能会面对这些BUG

1. 页面头端的note可能会跑到上一页的页面末端,需要手动修复( 这个bug被标记为**无法修复** )
2. 还没有找到新的bug

不过,如果在v200创建一个新铺面,体验还是非常舒适的

## 新旧版本操作变更

要上手新版本, 您可能需要适应如下操作

|                | 旧版本                                                       | 新版本                                                       |
| :-------------------: | :----------------------------------------------------------- | :----------------------------------------------------------- |
|    文件保存    | 旧的.csv保存格式,需要转换器转换                              | 新的.csv文件保存格式,内置转换器,但是保存需要输入后缀(`.tcsv`保存为可编辑的铺面,`.txt`保存为C2格式的铺面) |
| 修改note | 直接拖动note,点击note转换note样式                            | 需要先点击一下note选中,才能拖动或修改样式                    |
|    BPM修改     | 直接打开设置修改                                             | 需要先放置一个note在页面头部,接着用设置工具把它变成设置note,最后再输入修改 |
|    页面跳转    | 只能一页页翻,或者直接移动指针翻页                            | 可以一次翻十页                                               |
|      预览      | 需要再点击才能播放,在准备预览界面可以控制减速预览,开关key音,note出现动画.点停止会回到开始播放的那一页.无法显示总note数量和之前的note数量 | 改为在设置界面控制减速预览,控制key音,note出现动画.点停止会回到开始播放的那一页,点暂停能够在正在播放的页面停留并编辑.能显示总note数量和之前的note数量.甚至可以关掉auto在设备上游玩. |
| 放置note | 从两侧拖入 | 除了从两侧拖入,还可以切换的手动编辑模式,右键空白处添加note |

# 已知BUG

虽然PCtyx很强大,但是它仍不可避免的存在bug,这些bug通常并不严重,但是值得我们留意

如果你发现的新的bug,请到相关页面留言

[反馈PCtyx的bug](https://github.com/XionUzuki/PCtyx/issues/) [反馈Cytoid的bug](https://github.com/Cytoid/Cytoid/issues/)

> 偶发音频延迟(易复现)(无法修复)
>> 解决方法: 确保音频延迟正确,重新开始预览

> 导出以后,谱面比音频慢/快一屏幕
>> 解决方法: 手动编辑C2谱面文件,找到`music_offset`参数,将后面的数字减去/增加一屏幕的时间
>>>小知识: 一屏幕时间为`120/BPM`